# Claude Code Viewer

[English](./README.en.md)

Claude Codeのセッション履歴をブラウザで閲覧・エクスポートできるWebアプリケーションです。

## こんな時に便利

- Claude Codeとの過去のやり取りを振り返りたい
- セッションの内容を他の人に共有したい
- マークダウンやコードブロックを見やすく表示したい
- セッションで何をしたか素早く把握したい（サマリー機能）
- AIに要約を生成させたい

## 動作環境

- Node.js 18.17.0 以上

## セットアップ

```bash
git clone https://github.com/f-tk-ttshp77/claude-code-viewer.git
cd claude-code-viewer
npm install
```

### 設定（オプション）

Claude Codeのデータが標準以外の場所にある場合は、環境変数で指定できます。

```bash
# .env.example を .env にコピー
cp .env.example .env

# .env を編集してパスを設定
CLAUDE_DATA_PATH=/path/to/your/claude/projects
```

## 起動方法

```bash
npm run dev
```

http://localhost:3333 をブラウザで開いてください。

> **セッションが表示されない場合**
> アプリ画面に表示されるガイダンスに従って設定を確認してください。

## 使い方

### 1. セッション一覧

起動するとホーム画面にプロジェクトごとのセッション一覧が表示されます。

- セッションはプロジェクト（ディレクトリ）ごとにグループ化
- 最終更新日時の新しい順にソート
- セッションの要約（最初のメッセージ）がプレビュー表示

### 2. セッション詳細

セッションをクリックすると、会話の全内容が表示されます。

**表示される内容:**

- ユーザーとClaudeのメッセージが時系列で表示
- マークダウンが適切にフォーマット（見出し、リスト、テーブル等）
- コードブロックはシンタックスハイライト付き

### 3. コマンド展開の折りたたみ

`/rspec` などのカスタムコマンドを使った場合、展開されたmdファイルの内容は自動的にアコーディオンで折りたたまれます。「開く」をクリックすると内容を確認できます。

### 4. HTMLエクスポート

「Export HTML」ボタンをクリックすると、セッションをHTMLファイルとしてダウンロードできます。

- CSSが埋め込まれているので、単体で閲覧可能
- 他の人への共有に便利
- コマンド展開部分はクリックで開閉可能

### 5. セッションサマリー

「サマリー」タブをクリックすると、セッションの構造化された要約が表示されます。

**自動抽出される情報:**

- セッション統計（読んだファイル数、変更ファイル数、実行コマンド数など）
- タスク一覧（ユーザーの各質問ごとに分割）
- 各タスクのフェーズ（調査→計画→実装→検証）

### 6. AI要約（オプション）

Anthropic APIキーを設定すると、AIによる自然言語での要約を生成できます。

```bash
# .env に追加
ANTHROPIC_API_KEY=your-api-key
```

「要約を生成」ボタンをクリックすると：

- セッション全体の要約
- 各タスクの1行要約

が生成されます。生成結果はキャッシュされるため、2回目以降は即座に表示されます。

## データについて

Claude Codeのセッションデータは `~/.claude/projects/` に保存されています。このアプリはそのデータを読み取って表示します。

```
~/.claude/projects/
├── -Users-username-project1/
│   ├── xxxx-xxxx-xxxx.jsonl  ← セッションファイル
│   └── ...
└── ...
```

## ライセンス

MIT
